/*
 * jQuery Rotator Plugin
 *
 * @author: Jonathan Brumley <cayasso@gmail.com>
 */
(function(f){f.fn.rotator=function(b){return!this.length?this:new m(this,b)};var m=function(b,m){function t(h){(h||false)===true?(a--,a<0&&(a=n-1)):(i&&a++,a==n&&(a=0))}function j(h,b){a=typeof h==="number"?h:a;o!==true&&t(b);a!=g&&(d.eq(a).css("z-index",1).fadeTo(c.speed,1),d.eq(g).css("z-index",0).animate({opacity:0},c.speed,function(){k.transition(this,g)}),g=a);o=false}var d=f(b),p=f(b).children(),a=null,n=d.length,g=null,l=0,q,r,o=true,i=false,k={transition:function(){},cycleEnd:function(){}}, c=f.extend({},{delay:5E3,speed:1E3,cycle:true,start_index:0,cycles:0,cycle_end_index:0},m)(p.length)&&(d=p);if(d.length<2)return b;var a=c.start_index===0?null:c.start_index,s=c.cycles*d.length;d.css("position","absolute").hide().parent().css("position","relative");d.eq(c.start_index).show();j();this.stop=function(){clearTimeout(q);clearTimeout(r);d.stop();i=false;l=0;return this};this.bind=function(a,c){k[a]&&(k[a]=c);return this};this.jump=function(a){e.stop();j(a);return this};this.play=function(b){i|| (i=true,b=b||false,a===null&&(a=0),r=setTimeout(function(){(function u(){if(s&&l>=s&&a==c.cycle_end_index)return e.stop(),l=0,k.cycleEnd(this,g),false;else j(a,b,true),l++,q=setTimeout(u,c.delay)})()},c.delay));return this};this.prev=function(){e.stop();j(a,true);return this};this.next=function(){e.jump();return this};var e=this;c.cycle&&e.play();f(b).data("rotator",e);return b}})(jQuery);
